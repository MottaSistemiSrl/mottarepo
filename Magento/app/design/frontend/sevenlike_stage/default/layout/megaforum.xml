<?xml version="1.0"?>
<layout version="0.1.0">

    <default>
        <reference name="head">
            <action method="addCss">
                <stylesheet>css/forum.css</stylesheet>
            </action>
        </reference>
    </default>

    <!--<default>
        <reference name="top.links">
        <block type="megaforum/index" name="megaforum.toplink" >
            <action method="addToTopLink" />
        </block>
        </reference>
    </default>-->

    <customer_account>
        <reference name="customer_account_navigation">
            <action method="addLink" translate="label" module="megaforum">
                <name>Topics</name>
                <path>megaforum/index/myforumtopics</path>
                <label>I miei argomenti</label>
            </action>
            <action method="addLink" translate="label" module="megaforum">
                <name>Posts</name>
                <path>megaforum/index/myforumposts</path>
                <label>I miei post</label>
            </action>
            <!-- <action method="addLink" translate="label" module="megaforum"><name>Image</name><path>megaforum/index/image</path><label>My Forum Settings</label></action> -->
            <action method="addLink" translate="label" module="megaforum">
                <name>Inbox</name>
                <path>megaforum/index/inbox</path>
                <label>My Inbox</label>
            </action>
        </reference>
    </customer_account>

    <megaforum_index_inbox>
        <label>Megaforum Index Inbox</label>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="megaforum/inbox" name="megaforum_inbox" template="megaforum/inbox.phtml"/>
        </reference>
    </megaforum_index_inbox>

    <megaforum_index_myforumtopics>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="megaforum/myforumtopics" name="megaforum_myforumtopics"
                   template="megaforum/myforumtopics.phtml"/>
        </reference>
    </megaforum_index_myforumtopics>

    <megaforum_index_myforumposts>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="megaforum/myforumposts" name="megaforum_myforumposts" template="megaforum/myforumposts.phtml"/>
        </reference>
    </megaforum_index_myforumposts>

    <megaforum_index_image>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="megaforum/image" name="megaforum_image" template="megaforum/image.phtml"/>
        </reference>
    </megaforum_index_image>

    <megaforum_index_privatemsg>
        <label>Megaforum Messaggio Privato</label>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-right.phtml</template>
            </action>
        </reference>
        <reference name="content">
            <block type="megaforum/index" name="megaforum_index" template="megaforum/privatemsg.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/left" name="megaforum_left" before="-" template="megaforum/left.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/index" name="megaforum.right" template="megaforum/forumroot.phtml" before="-"/>
        </reference>
    </megaforum_index_privatemsg>

    <megaforum_index_reply>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-left.phtml</template>
            </action>
        </reference>
        <update handle="customer_account"/>
        <reference name="content">
            <block type="megaforum/index" name="megaforum_index" template="megaforum/reply.phtml"/>
        </reference>

    </megaforum_index_reply>

    <megaforum_index_index>
        <label>Megaforum Index Index</label>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-right.phtml</template>
            </action>
        </reference>
        <!--<update handle="customer_account"/>-->
        <reference name="content">
            <block type="megaforum/index" name="megaforum_index" template="megaforum/index.phtml"/>
        </reference>
        <remove name="right.blog.menu"/>
        <reference name="right">
            <block type="megaforum/index" name="megaforum.right" template="megaforum/forumroot.phtml" before="-"/>
            <block type="megaforum/index" template="megaforum/menu_forum.phtml" before="megaforum.right"/>
        </reference>
    </megaforum_index_index>

    <megaforum_index_topic>
        <label>Megaforum Index Topic</label>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-right.phtml</template>
            </action>
        </reference>
        <reference name="content">
            <block type="megaforum/index" name="megaforum_index" template="megaforum/topic.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/index" name="megaforum.right" template="megaforum/forumroot.phtml" before="-"/>
            <block type="megaforum/index" template="megaforum/menu_forum.phtml" before="megaforum.right"/>
        </reference>
        <reference name="right">
            <block type="megaforum/left" name="megaforum_left" before="-" template="megaforum/left.phtml"/>
        </reference>
    </megaforum_index_topic>

    <megaforum_index_mytopic>
        <label>Megaforum Aggiungi Nuovo Topic</label>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-right.phtml</template>
            </action>
        </reference>
        <reference name="content">
            <block type="megaforum/index" name="megaforum_index" template="megaforum/mytopic.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/left" name="megaforum_left" before="-" template="megaforum/left.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/index" name="megaforum.right" template="megaforum/forumroot.phtml" before="-"/>
            <block type="megaforum/index" template="megaforum/menu_forum.phtml" before="megaforum.right"/>
        </reference>
    </megaforum_index_mytopic>

    <megaforum_index_post>
        <label>Megaforum Index Post</label>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-right.phtml</template>
            </action>
        </reference>
        <reference name="content">
            <block type="megaforum/post" name="megaforum_post" template="megaforum/post.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/left" name="megaforum_left" before="-" template="megaforum/left.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/index" name="megaforum.right" template="megaforum/forumroot.phtml" before="-"/>
            <block type="megaforum/index" template="megaforum/menu_post.phtml" before="megaforum.right"/>
        </reference>
    </megaforum_index_post>

    <megaforum_index_mypost>
        <label>Megaforum Aggiungi Nuovo Post</label>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-right.phtml</template>
            </action>
        </reference>
        <reference name="content">
            <block type="megaforum/index" name="megaforum_index" template="megaforum/mypost.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/left" name="megaforum_left" before="-" template="megaforum/left.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/index" name="megaforum.right" template="megaforum/forumroot.phtml" before="-"/>
            <block type="megaforum/index" template="megaforum/menu_post.phtml" before="megaforum.right"/>
        </reference>
    </megaforum_index_mypost>

    <megaforum_index_search>
        <label>Megaforum Index Search</label>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-right.phtml</template>
            </action>
        </reference>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="megaforum/search" name="megaforum_search" template="megaforum/search.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/index" name="megaforum.right" template="megaforum/forumroot.phtml" before="-"/>
            <block type="megaforum/index" template="megaforum/menu_forum.phtml" before="megaforum.right"/>
        </reference>
    </megaforum_index_search>

    <megaforum_index_edit>
        <label>Megaforum Post Modifica</label>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-right.phtml</template>
            </action>
        </reference>
        <reference name="content">
            <block type="megaforum/index" name="megaforum_index" template="megaforum/edit.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/left" name="megaforum_left" before="-" template="megaforum/left.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/index" name="megaforum.right" template="megaforum/forumroot.phtml" before="-"/>
            <block type="megaforum/index" template="megaforum/menu_post.phtml" before="megaforum.right"/>
        </reference>
    </megaforum_index_edit>

    <megaforum_index_profile>
        <label>Megaforum Profile</label>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-right.phtml</template>
            </action>
        </reference>
        <!--<update handle="customer_account"/>-->
        <reference name="content">
            <block type="megaforum/index" name="megaforum_index" template="megaforum/profile.phtml">
                <block type="megaforum/profiletopic" name="megaforum.profile.topic"
                       template="megaforum/profile-topic.phtml"/>
                <block type="megaforum/profilepost" name="megaforum.profile.post"
                       template="megaforum/profile-post.phtml"/>
                <block type="megaforum/profilecreation" name="megaforum.profile.creation"
                       template="megaforum/profile-creation.phtml"/>
            </block>
        </reference>

        <remove name="right.blog.menu"/>
        <reference name="right">
            <block type="megaforum/index" name="megaforum.right" template="megaforum/forumroot.phtml" before="-"/>
            <block type="megaforum/index" template="megaforum/menu_forum.phtml" before="megaforum.right"/>
        </reference>
    </megaforum_index_profile>

    <megaforum_index_mywatchlist>
        <label>Megaforum Lista dei Preferiti</label>
        <reference name="root">
            <action method="setTemplate">
                <template>page/2columns-right.phtml</template>
            </action>
        </reference>
        <reference name="content">
            <!--Dan Nistor - watchlist change from global to single user save -->
            <!--<block type="megaforum/mywatchlist" name="megaforum_mywatchlist" template="megaforum/mywatchlist.phtml"/>-->
            <block type="megaforum/watchlistsingle" name="megaforum_mywatchlist"
                   template="megaforum/watchlist-single.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/left" name="megaforum_left" before="-" template="megaforum/left.phtml"/>
        </reference>
        <reference name="right">
            <block type="megaforum/index" name="megaforum.right" template="megaforum/forumroot.phtml" before="-"/>
            <block type="megaforum/index" template="megaforum/menu_forum.phtml" before="megaforum.right"/>
        </reference>
    </megaforum_index_mywatchlist>

</layout>   
	